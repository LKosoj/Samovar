# mod_rmvk

Модуль предоставляет интерфейс для взаимодействия с устройством РМВ-К через UART. Реализует инициализацию UART, отправку AT-команд, чтение и обработку ответов, а также управление состоянием устройства. Поддерживает чтение входного и выходного напряжения, установку выходного напряжения, включение/выключение выхода и выбор режима из памяти.

Ключевые структуры данных  
rmvk_t — Структура, хранящая текущее состояние устройства РМВ-К: состояние подключения, включения, напряжений и значения из памяти.

---
void RMVK_init(void)  
Инициализирует UART для взаимодействия с РМВ-К.  
Аргументы  
Возвращает  
Исключения

---
void rmvk_read()  
Синхронно читает данные из UART и обновляет состояние устройства.  
Аргументы  
Возвращает  
Исключения

---
void rmvkFn(void* arg)  
Фоновая задача FreeRTOS для периодического опроса состояния РМВ-К.  
Аргументы  
arg — Указатель на аргументы задачи (не используется).  
Возвращает  
Исключения

---
uint8_t RMVK_cmd(const char* cmd, rmvk_res_t res)  
Отправляет AT-команду устройству и ожидает ожидаемый ответ.  
Аргументы  
cmd — Строка с AT-командой.  
res — Ожидаемый тип ответа (RMVK_INT, RMVK_OK, RMVK_ON).  
Возвращает  
1 при успешном получении ожидаемого ответа, 0 в случае ошибки или таймаута.  
Исключения

---
uint16_t RMVK_set_out_voltge(uint16_t voltge)  
Устанавливает выходное напряжение на РМВ-К.  
Аргументы  
voltge — Желаемое напряжение (от 40 до 230 В).  
Возвращает  
Установленное напряжение при успехе, 0 при ошибке.  
Исключения

---
uint16_t RMVK_set_state(uint16_t new_state)  
Устанавливает состояние устройства (включено/выключено).  
Аргументы  
new_state — 1 для включения, 0 для выключения.  
Возвращает  
1 при успехе, 0 при ошибке.  
Исключения

---
uint16_t RMVK_set_on(uint16_t state)  
Аналог RMVK_set_state — включает или выключает выходное напряжение.  
Аргументы  
state — 1 для включения, 0 для выключения.  
Возвращает  
1 при успехе, 0 при ошибке.  
Исключения

---
uint16_t RMVK_select_mem(uint16_t sm)  
Выбирает напряжение из указанной ячейки памяти (0–9).  
Аргументы  
sm — Номер ячейки памяти (0–9).  
Возвращает  
1 при успехе, 0 при ошибке.  
Исключения

---
uint16_t RMVK_get_in_voltge()  
Читает текущее входное напряжение из сети.  
Аргументы  
Возвращает  
Значение входного напряжения в вольтах.  
Исключения

---
uint16_t RMVK_get_out_voltge()  
Читает текущее реальное выходное напряжение.  
Аргументы  
Возвращает  
Значение выходного напряжения в вольтах.  
Исключения

---
uint16_t RMVK_get_store_out_voltge()  
Читает установленное (целевое) выходное напряжение.  
Аргументы  
Возвращает  
Целевое напряжение на выходе в вольтах.  
Исключения

---
bool RMVK_get_state()  
Проверяет, включено ли выходное напряжение.  
Аргументы  
Возвращает  
true, если выход включён, иначе false.  
Исключения

---
bool RMVK_get_conn()  
Проверяет состояние подключения устройства.  
Аргументы  
Возвращает  
true, если устройство подключено, иначе false.  
Исключения

---
uint8_t get_rmvk_state()  
Возвращает текущее состояние включения устройства (аналог RMVK_get_state).  
Аргументы  
Возвращает  
1, если включено, 0 — если выключено.  
Исключения

---
uint8_t get_rmvk_conn()  
Возвращает состояние подключения устройства (аналог RMVK_get_conn).  
Аргументы  
Возвращает  
1, если подключено, 0 — если нет.  
Исключения
