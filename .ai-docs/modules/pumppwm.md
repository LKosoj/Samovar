# pumppwm

Модуль управления водяным насосом с использованием ШИМ и PID-регулирования температуры.  
Предназначен для интеграции с системой Samovar при включённой опции USE_WATER_PUMP.  
Реализует плавный запуск насоса, защиту при аварийных событиях и поддержание заданной температуры воды через регулировку скорости насоса.

Ключевые структуры данных  
pump_regulator — PID-регулятор, управляющий скоростью насоса на основе текущей температуры  
pump_pwm — объект управления ШИМ-сигналом для насоса

void init_pump_pwm(uint8_t pin, int freq)  
Инициализирует ШИМ для управления насосом и настраивает параметры PID-регулятора  
Аргументы  
pin — номер GPIO-пина, к которому подключён насос  
freq — частота ШИМ-сигнала в герцах  
Возвращает  
Нет  
Исключения  
Нет

---
void set_pump_pwm(float duty)  
Устанавливает скважность ШИМ для насоса с учётом состояния запуска и аварийных условий  
Аргументы  
duty — значение скважности (0–1023), где 0 — насос выключен  
Возвращает  
Нет  
Исключения  
Нет

---
void set_pump_speed_pid(float temp)  
Обновляет входное значение PID-регулятора текущей температурой и устанавливает соответствующую скорость насоса  
Аргументы  
temp — текущее значение температуры воды  
Возвращает  
Нет  
Исключения  
Нет
