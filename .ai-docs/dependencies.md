# Зависимости

Проект "Самовар" требует следующие библиотеки и компоненты для корректной работы. Все зависимости управляются через PlatformIO.

## Основные библиотеки

| Библиотека | Назначение | Версия |
|---|---|---|
| `ESPAsyncWebServer` | Асинхронный веб-сервер для HTTP-интерфейса | `~2.1.0` |
| `AsyncTCP` | Поддержка асинхронных TCP-соединений | `~1.1.1` |
| `ArduinoJson` | Парсинг и генерация JSON-данных | `~6.21.2` |
| `OneWire` | Работа с датчиками температуры DS18B20 | `~2.3.7` |
| `DallasTemperature` | Управление датчиками DS18B20 | `~3.11.0` |
| `Adafruit BMP280 Library` | Чтение данных с датчиков давления | `~2.5.1` |
| `GyverPID` | Реализация ПИД-регулятора для управления нагревом | `~3.4` |
| `LiquidCrystal_I2C` | Управление LCD-дисплеем | `~1.1.4` |
| `GyverEncoder` | Обработка энкодера для пользовательского интерфейса | `~3.1` |
| `GyverButton` | Обработка кнопок | `~3.0` |
| `AsyncMqttClient` | Поддержка MQTT-протокола | `~0.8.2` |
| `ArduinoOTA` | Обновление прошивки по Wi-Fi | `~1.0.0` |

## Условные зависимости

Некоторые библиотеки подключаются только при включении соответствующих макросов:

- **`USE_LUA`**: `Lua` (для выполнения пользовательских скриптов).
- **`USE_BLYNK`**: `Blynk` (для интеграции с Blynk).
- **`USE_TELEGRAM`**: `UniversalTelegramBot` (для уведомлений в Telegram).
- **`USE_STEPPER_ACCELERATION`**: `AccelStepper` (для плавного разгона шагового двигателя).
- **`SAMOVAR_USE_POWER`**: `ESP32AnalogWrite` (для управления мощностью нагрева).

## Аппаратные зависимости

Проект поддерживает различные конфигурации периферии. Для работы требуются:

- **ESP32** (любая совместимая плата).
- Датчики температуры: DS18B20 (OneWire).
- Датчики давления: BMP280, BME280, XGZP6897D.
- Дисплей: LCD 16x2 или 20x4 с I2C-адаптером.
- Энкодер и кнопки для локального управления.
- Реле для управления нагревателем, насосом, клапаном.

## Файловая система

Проект использует **LittleFS** для хранения:
- Веб-интерфейса (`/www`).
- Конфигурационных файлов.
- Логов (`data.csv`, `state.csv`).
- Lua-скриптов (при `USE_LUA`).

## Инструменты сборки

- **PlatformIO** — основная среда разработки.
- **ESP-IDF** — для низкоуровневых операций (при необходимости).
- **OpenOCD** — для отладки через JTAG.

Все зависимости объявлены в `platformio.ini` и автоматически устанавливаются при сборке проекта.
