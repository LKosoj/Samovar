# Samovar
Скетч для ESP32.
Предназначен для управления ректификационной колонной, процессом дистилляции, и пивоварением. Необходимые библиотеки выложены в каталоге library, остальные грузятся из репозитория библиотек через Arduino IDE

Устройство контролирует 5 температур (ТСА, в кубе, в голове колонны, в царге и воды на выходе), управляет 4 реле, управляет шаговиком с перистальтическим насосом для отбора из РК, управляет сервоприводом для раздельного отбора (10 + 1 емкость), работает с экраном и энкодером, работает через веб-сервер ESP32, сохраняет у себя лог погона, на своем веб-сервере рисует графики по логу (4 температуры и давление), работает через Blynk  - можно удаленно с телефона контролировать основные параметры и управлять основными функциями. Реализовано аварийное отключение в случае выхода температур за заданные параметры.

Еще одна возможность: можно задавать программу отбора на весь погон для ректификации. В программе отбора можно указать в какую емкость, какой объем, в каком температурном режиме отбирать текущую часть погона.
Для режима "Пиво" так же предусмотрена программа. Благодаря этому можно варить разные сорта пива в полуавтоматическом режиме, а так же использовать данный скетч для управления нагревателем в режиме су-вид (sous-vide). 

Для работы всего функционала необходимо подключение к интернету. Без интернета не будет работать Blynk и не будут строиться графики (библиотека для графиков грузится из сети, она большая, ее на внутренней памяти не сохранить). Все остальное будет работать. 

Обратите внимание!!! Не смотря на то, что теоретически все автоматизировано (или может быть автоматизировано), присутствие оператора рядом с колонной обязательно! Автоматика позволяет упростить отбор, но сама ничего не сделает. Без понимания процессов оператором это просто прикольная (на мой взгляд) штука.

Схема подключения
![alt text](https://github.com/LKosoj/Samovar/blob/master/Fritzing%20scheme/Samovar_bb.png)

Как скомпилировать, загрузить и настроить Самовар:
https://www.samovar-tool.ru/samovar-diy/

Как выглядит реализованное, можно посмотреть тут https://www.samovar-tool.ru/2021/03/21/o-rabote-samovara/

Обсуждение на форуме https://alcodistillers.ru закрыто владельцем. Меня обвинили в том, что Самовар коммерческий продукт. Тему удалили, меня на форуме забанили. Это не так. Проект не коммерческий, и коммерческим никогда не будет. Обсуждение переносится на форум https://forum.homedistiller.ru/index.php?topic=367128.0
Все вопросы можно задавать там.

Обратите внимание! Скетч с версии 4.0 работает с SDK версией не ниже 2.0.1. Как установить SDK - смотрите тут: https://www.samovar-tool.ru/2021/03/30/ustanovka-i-nastrojka-platy-esp32-v-arduino-ide/

    
