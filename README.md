# Проект Самовар

## Описание
Автоматизированная система управления самогонным аппаратом на базе ESP32.
Устройство контролирует 5 температур (ТСА, в кубе, в голове колонны, в царге и воды 
на выходе), управляет 4 реле, управляет шаговиком с перистальтическим насосом для 
отбора из РК, управляет сервоприводом для раздельного отбора (10 + 1 емкость), 
работает с экраном и энкодером, работает через веб-сервер ESP32, сохраняет у себя 
лог погона, отображает графики по логу (4 температуры и давление), 
Реализовано аварийное отключение в случае выхода 
температур за заданные параметры.
Реализована возможность управления через веб-интерфейс, Blynk, отправка данных в облачное хранилище, отправка уведомлений в Telegram.

## Основные возможности
- Поддержка различных режимов работы (ректификация, дистилляция, БК, НБК, пивоварение)
- Веб-интерфейс управления
- Интеграция с Telegram и MQTT
- Автоматическое управление процессами
- Система безопасности и мониторинга
- Поддержка скриптового языка Lua для расширения функционала
- Возможность задать для каждого режима свои параметры в виде программы, управляющей процессом. Программа задается через веб-интерфейс, представляет собой набор строк, которые выполняются последовательно. Подробнее смотрите в документации и на форуме.

## Требования
### Аппаратные
- ESP32
- Датчики температуры DS18B20 (5 шт)
- Датчик давления (MPX5010D или XGZ)
- LCD дисплей
- Энкодер и кнопки
- Шаговый двигатель
- Насос для подачи воды
- Клапаны
- Сервопривод
### Программные
- Arduino IDE
- Библиотеки:
  - OneWire
  - DallasTemperature
  - ESPAsyncWebServer
  - AsyncTCP
  - ESPAsyncWiFiManager
  - GyverEncoder
  - GyverButton
  - GyverPID
  - ESP32Servo
  - ArduinoJson

## Установка
1. Склонируйте репозиторий
2. Установите необходимые библиотеки
3. Настройте параметры в файле конфигурации
4. Загрузите прошивку в ESP32

Схема подключения
![alt text](https://github.com/LKosoj/Samovar/blob/master/Fritzing%20scheme/
Samovar_bb.png)

## Документация
- [Текущее состояние проекта](docs/current_state.md)
- [История изменений](samovar_chk.log)
- [План развития](samovar_chk.md)
- [Документация по проекту](https://www.samovar-tool.ru/)

Как выглядит реализованное, можно посмотреть тут https://www.samovar-tool.ru/2021/03/21/o-rabote-samovara/

Проект не коммерческий. Обсуждение на форуме https://forum.homedistiller.ru/index.
php?topic=367128.120#msg13883184
Все вопросы можно задавать там.
